apply plugin: 'java'

group 'org.redwid.tools'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

jar {

    from {

        configurations.runtime.collect {
            it.isDirectory() ? it : zipTree(it)
        }

        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }

    manifest {
        attributes 'Main-Class': 'org.redwid.tools.Files2Db'
    }
}

dependencies {
    compile 'com.j256.ormlite:ormlite-core:5.1'
    compile 'com.j256.ormlite:ormlite-jdbc:5.1'
    compile 'com.drewnoakes:metadata-extractor:2.11.0'
    compile files('libs/sqlite-jdbc-3.23.1.jar')

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

task copyCompiledJarTask(type: Copy) {
    from 'build/libs/'
    into "${projectDir}"
    include '**/*.jar'
}

assemble.finalizedBy(copyCompiledJarTask)